# ðŸ‘¶ ØªÙˆØ«ÙŠÙ‚ ØªØ¯ÙÙ‚ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„ (Child Onboarding Flow)

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ ÙŠØ´Ø±Ø­ ÙƒÙŠÙÙŠØ© ØªÙ†ÙÙŠØ° Ù…ÙŠØ²Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ø·ÙØ§Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆØªÙˆØ¬ÙŠÙ‡Ù‡ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© (Ø¥Ù…Ø§ ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø£Ùˆ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ.

## ðŸŽ¯ Ø§Ù„Ù‡Ø¯Ù
Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø£Ø¨/Ø§Ù„Ø£Ù…) Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:
1. Ø¥Ø°Ø§ **ÙƒØ§Ù† Ù„Ø¯ÙŠÙ‡ Ø£Ø·ÙØ§Ù„ Ø¨Ø§Ù„ÙØ¹Ù„** Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… -> ØªÙØªØ­ Ù„Ù‡ **Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Home)** Ù…Ø¨Ø§Ø´Ø±Ø©.
2. Ø¥Ø°Ø§ **Ù„Ù… ÙŠÙƒÙ† Ù„Ø¯ÙŠÙ‡ Ø£ÙŠ Ø·ÙÙ„** (Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯) -> ØªÙØªØ­ Ù„Ù‡ **ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„** (Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¹Ù…Ø±).

---

## ðŸ› ï¸ ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø§Ù„Ù…ÙŠØ²Ø© (Logic Flow)

### 1. Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Login)
Ø¹Ù†Ø¯ Ù†Ø¬Ø§Ø­ Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù€ `Token`ØŒ ÙŠØ¬Ø¨ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø®Ø·ÙˆØ© Ø¥Ø¶Ø§ÙÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡:
- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø§Ù„Ù…Ø³Ù…Ù‰ `getMyChildren` (Ø§Ù„Ø°ÙŠ Ù‚Ù…Ù†Ø§ Ø¨Ø¥Ù†Ø´Ø§Ø¦Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø§ÙƒØ¥Ù†Ø¯).
- ÙØ­Øµ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù€ API:
  - Ù‡Ù„ Ø§Ù„Ù…ØµÙÙˆÙØ© `children` ÙØ§Ø±ØºØ© `[]`ØŸ
  - Ù‡Ù„ Ø§Ù„Ù…ØµÙÙˆÙØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªØŸ

### 2. Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø± (Decision Making)
- **Ø§Ù„Ø­Ø§Ù„Ø© Ø£ (ÙŠÙˆØ¬Ø¯ Ø£Ø·ÙØ§Ù„)**:
  - ØªØ®Ø²ÙŠÙ† Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ù…Ø«Ù„Ø§Ù‹ `hasChildren: true`).
  - Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙˆØ±Ø§Ù‹ Ø¥Ù„Ù‰ `/home`.
- **Ø§Ù„Ø­Ø§Ù„Ø© Ø¨ (Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø·ÙØ§Ù„)**:
  - ØªØ®Ø²ÙŠÙ† Ø­Ø§Ù„Ø© `hasChildren: false`.
  - Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© `/add-child` (Ø£Ùˆ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„).

---

## ðŸ’» Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (Implementation Considerations)

### ðŸ§© 1. ØªØ¹Ø¯ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ù€ API
ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ù„Ø© ÙÙŠ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø¥Ù†Ø¯ Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¨Ø§ÙƒØ¥Ù†Ø¯:
```typescript
// frontend/src/services/childApi.ts
import { request } from "./request";

export const getMyChildren = () => request("/child/all/me", "GET");
/* Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ø¨Ø§ÙƒØ¥Ù†Ø¯ØŒ 
Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙƒØ¥Ù†Ø¯ Ù„ÙŠÙƒÙˆÙ† /api/child ÙÙ‚Ø· Ù„Ø¬Ù„Ø¨ Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¯ÙˆÙ† ØªÙ…Ø±ÙŠØ± ID */
```

### âš›ï¸ 2. ØªØ­Ø¯ÙŠØ« `AuthContext` Ø£Ùˆ `LoginScreen`
ÙÙŠ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ `LoginScreen.tsx`ØŒ Ø¨Ø¹Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙˆÙƒÙ†:

```typescript
const handleLoginSuccess = async (token) => {
  // 1. Ø­ÙØ¸ Ø§Ù„ØªÙˆÙƒÙ†
  saveToken(token);

  // 2. ÙØ­Øµ Ø§Ù„Ø£Ø·ÙØ§Ù„
  try {
    const children = await getMyChildren();
    
    if (children && children.length > 0) {
       // Ù„Ø¯ÙŠÙ‡ Ø£Ø·ÙØ§Ù„ -> Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
       navigate("/home");
    } else {
       // Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ‡ Ø£Ø·ÙØ§Ù„ -> ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„
       navigate("/add-child-info");
    }
  } catch (error) {
    console.error("Failed to fetch children", error);
    // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ØŒ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙƒØ®ÙŠØ§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ
    navigate("/home");
  }
};
```

### ðŸ›¡ï¸ 3. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª (Route Guards)
- **ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·ÙÙ„ (`/add-child-info`)**:
  - ÙŠÙØ¶Ù„ Ø£Ù„Ø§ ÙŠØ¯Ø®Ù„Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙ‡ Ø£Ø·ÙØ§Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ (Ø¥Ù„Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ±ÙŠØ¯ "Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯" Ø²Ø± Ù…Ù†ÙØµÙ„).
  - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙ‡ Ø£Ø·ÙØ§Ù„ØŒ Ù‡Ù„ Ù‡Ùˆ Ù‚Ø§Ø¯Ù… Ù…Ù† Ø²Ø± 'Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„' Ø£Ù… Ø£Ù†Ù‡ ØªÙˆØ¬ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØŸ"

---

## ðŸ”„ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ¯ÙÙ‚ (Diagram)

```mermaid
graph TD
    A[User Logins] --> B{Success?};
    B -- Yes --> C[Get Token];
    C --> D[Call API: GET /api/child];
    D --> E{Has Children?};
    E -- Yes (Array > 0) --> F[Navigate to HOME];
    E -- No (Empty Array) --> G[Navigate to ADD CHILD INFO];
    G --> H[User Enters Info];
    H --> I[Submit Info];
    I --> F;
```

---
